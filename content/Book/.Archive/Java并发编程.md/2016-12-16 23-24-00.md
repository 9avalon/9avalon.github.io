---
title: Java并发编程
date: 2016-8-7 14:52:31
---



原子变量类

AtomicIneger，AtomicLong，等等

之前接触到这种原子变量类还是在Redis写入的时候。为什么会用到这个呢？



之前看公司同事在操作redis的时候，发现他们写值的时候都是用到了AtomInteger这个类，今天碰巧读到了这个类，一开始以为这样是为了防并发的，但是今天网上搜了一下，发现redis内部是单线程的，每次操作都具有原子性。那么为什么还要用AtomInteger这个类呢？



并行不一定比串行快，因为线程有创建和上下文切换的开销，个人觉得创建比较耗时。



volatile，比 synchronized更轻量级的实现，它保证了并发时，共享变量的可见性，即，一个线程修改了变量，另一个线程能读到这个修改的值

共享变量：可以看到，线程一般先从主内存中把变量取出，然后复制一个变量副本到本地内存中。再进行操作，如果变量被声明了volatile，则每次这个值的修改，都会使本地内存的副本失效，线程需要从主内存中重新获取值。即声明了volatile的变量可以使值是内存中最新的值。

![共享变量](http://ww4.sinaimg.cn/large/005H7Wvyjw1f9pdmcjay2j30cs0avgmy.jpg)

synchronized在java6之前很多人都称呼其为“重量级锁”，但是随着java后面的持续优化，有些情况下它就没那么重了。



2016-12-11 更新
之前把这本书丢一边就没看了，今天重新拿起来看了一下。
看到某一张的翻译。。什么“发布”， “逸出”，然后快速地把后面的内容粗略看了一下。发现这本书的翻译真的很有问题。。。很多粗浅的概念都翻译得很奇怪。看半天才看懂。。真实愧对网络上的高分评价啊！，有能力的还是看英文原版吧。


