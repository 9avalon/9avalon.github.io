<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>List - Miguel's Wiki</title>
    <meta name="keywords" content=""/>
    <meta name="description" content="Miguel个人wiki"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="referrer" content="no-referrer" />
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#Java">Java</a>&nbsp;&#187;&nbsp;List
    <span class="updated">Page Updated&nbsp;
      2020-03-22 21:29:46
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">List</div>

  <h2 id="list">List</h2>
<h3 id="arraylist">ArrayList</h3>
<p>1.底层由动态数组实现</p>
<p>2.扩容方法为，需要扩容的时候，扩容1.5倍，如果1.5倍还不够，就以需要扩容的容量来扩容，创建新的数组，并将老数据拷贝到新数组中。</p>
<p>3.线程不安全，如果想线程安全，使用CopyOnWriteArrayList或者SyncornizedList，或者Vector</p>
<p>4.通过重写writeObject方法，进行序列化</p>
<p>5.支持求并集(addAll)，交集(retainAll)，单向差集(removeAll)</p>
<h4 id="_1">平均时间复杂度</h4>
<p>插入 平均 O(n)，队尾O(1)</p>
<p>查找 平均 O(1)</p>
<p>删除 平均 O(n)，队尾O(1)</p>
<h3 id="linkedlist">LinkedList</h3>
<p>1.底层由链表组成</p>
<p>2.具有双向链表的特征，可以实现栈，队列的功能，队列(addLast, removeFirst)，栈(addFirst, removeFirst);</p>
<p>3.线程不安全，需要线程安全要使用ConcurrentLinkedQueue</p>
<h3 id="copyonwritearraylist">CopyOnWriteArrayList</h3>
<p>1.ArrayList的线程安全版本，读不加锁，写加锁。</p>
<p>2.为什么读不加锁，因为写的时候，是拷贝新的数组进行修改，修改完毕后再修改原数组的引用，此时如果并发读，读的是旧数组。</p>
<p>3.如果写不加锁会出现什么问题？会导致并发写入的时候，有写入丢失，</p>
<p>4.为什么要采用这种写入拷贝新数组的方式？因为如果不这么做，直接在原数组上修改，那并发读的时候，可能会读到脏的数据。</p>
<p>5.真正存储数组的字段使用了volatile，保证了对数组的修改，其他线程立马可见。</p>
<p>6.缺点，写入的时候需要拷贝一份数组，会导致占用内存比较多。</p>
<p>7.写入的性能都比较差，需要O(n)，查找很快，适合读多写少的场景。</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Miguel.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-07-09 10:41:11</p>
      </span>
    </div>

    
    
  </body>
</html>