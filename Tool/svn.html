
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>svn - 9avalon wiki</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/jumbotron-narrow.css" rel="stylesheet">
    <link href="../static/css/style.css" rel="stylesheet">
	<link href="../static/css/tango.css" rel="stylesheet">
</head>

<body>

<div class="container">
	<ol class="breadcrumb">	
		<li><a href="/">Home</a></li><li><a href="/#Tool">Tool</a></li><li class="active">svn</li>
    </ol>
	
    <div class="header clearfix">
        <nav>
            <ul class="nav nav-pills pull-right">
            </ul>
        </nav>
        <h3 class="text-muted">svn</h3>
    </div>

    <div class="row wiki-main">
		<hr>
		<h4 id="svn">什么是svn</h4>
<p>svn和git是目前使用最广泛的版本管理工具，知道github的朋友肯定也知道git并且使用过git，但其实svn也是一款很优秀的版本管理工具，与git的分布式不同的是，svn是集中式管理，拥有更细致的按照目录级别的权限控制。</p>
<h4 id="_1">在服务器中新建仓库</h4>
<p>下面的操作步骤我都是默认服务器环境中已经搭建好svn了，有时候新建svn仓库的命令我会忘记掉，所以就只记录下新建svn仓库的步骤了。</p>
<p>首先创建仓库文件夹，然后执行下面命令</p>
<div class="hlcode"><pre><span class="n">svnadmin</span> <span class="n">create</span> <span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">svn</span><span class="o">/</span><span class="n">projectname</span>
</pre></div>


<p>进入svn仓库项目的目录</p>
<div class="hlcode"><pre><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">svn</span><span class="o">/</span><span class="n">projectname</span><span class="o">/</span><span class="n">conf</span>
</pre></div>


<p>这里要修改三个配置文件分别是passwd， svnserve.conf ，和authz。  </p>
<p>authz是管理用户权限的，其中rw表示读和写，account表示用户名。</p>
<div class="hlcode"><pre><span class="k">[/]</span>
<span class="na">account</span><span class="o">=</span><span class="s">rw</span>
</pre></div>


<p>passwd 当然是管理每个用户的密码啦</p>
<div class="hlcode"><pre><span class="n">account</span><span class="o">=</span><span class="n">password</span>
</pre></div>


<p>svnserve.conf管理svn的一些基本配置，我们把下面的三行去掉注释。</p>
<div class="hlcode"><pre><span class="n">anon</span><span class="o">-</span><span class="n">access</span> <span class="o">=</span> <span class="n">none</span>
<span class="n">auth</span><span class="o">-</span><span class="n">access</span> <span class="o">=</span> <span class="n">write</span> 
<span class="n">password</span><span class="o">-</span><span class="n">db</span> <span class="o">=</span> <span class="n">passwd</span>
</pre></div>


<p>修改完后保存就可以了。</p>
<h4 id="_2">设置同步更新</h4>
<p>同步更新的意思是，在服务器也把代码检出来，然后设置同步更新后，在本地提交更新后，服务器上检出的代码也会随着一起更新掉。我使用这个来部署tomcat的项目。</p>
<p>先在服务器检出svn仓库，注意这里的仓库地址是远程地址
​  <br />
    svn co 仓库地址  </p>
<p>在linux仓库地址的hook文件夹下新建post-commit，这里的仓库地址是linux上的地址。</p>
<div class="hlcode"><pre><span class="c">#!/bin/sh</span>
<span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>zh_CN.UTF-8
<span class="nb">cd</span> 检出的仓库地址
svn cleanup
svn update 检出的仓库地址 --username 账号 --password 密码 --no-auth-cache
</pre></div>


<p>最后提升这个文件的权限</p>
<div class="hlcode"><pre><span class="n">chmod</span> <span class="mi">777</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">svn</span><span class="o">/</span><span class="n">baoming</span><span class="o">/</span><span class="n">hooks</span><span class="o">/</span><span class="n">post</span><span class="o">-</span><span class="n">commit</span>
</pre></div>


<p>ok
​       </p>
    </div>

    <footer class="footer">
        <p style="font-size: 12px">Copyright © 2016 . Powered by Simiki. Theme by 9avalon</p>
    </footer>

</div> <!-- /container -->

</body>
</html>